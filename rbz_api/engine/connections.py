import socketimport sslimport sysfrom rbz_api.settings import ENGINE_HOST, ENGINE_PORTdef recvall(sock):    BUFF_SIZE = 4096  # 4 KiB    data = b''    while True:        part = sock.recv(BUFF_SIZE)        data += part        if len(part) < BUFF_SIZE:            break    return datadef send_request_to_movie_engine(request):    try:        s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)    except socket.error:        print('Failed to create socket')        sys.exit()    print('Socket Created')    try:        remote_ip = socket.gethostbyname(ENGINE_HOST)        print(remote_ip)    except socket.gaierror:        print('Hostname could not be resolved. Exiting')        sys.exit()    ssl_sock = ssl.wrap_socket(s, cert_reqs=ssl.CERT_REQUIRED, ca_certs='engine/rbzio_socket.pem')    ssl_sock.connect_ex((remote_ip, ENGINE_PORT))    print('Socket Connected to ' + ENGINE_HOST + ' on ip ' + remote_ip)    # DATA TO SEND:    message = request  # "**m:the dark knight**"    try:        ssl_sock.write(message.encode())    except socket.error:        print('Send failed')        sys.exit()    print('Message sent successfully')    response = recvall(ssl_sock)    ssl_sock.close()    s.close()    return response.decode()